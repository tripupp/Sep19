{% extends 'cities/base.html' %}
{% load static %}


{% block title %}
    Redfab
{% endblock title %}


{% block head_extra %}
    <link rel="stylesheet" href="{% static 'cities/css/package_style.css' %}">
{% endblock %}


{% block bodycontent %}

{% include "cities/menubar.html" %}

<!-------------Filter---------------->
      
<div class="container">
    <div class="row">
     <div class="accordion col-sm-3" id="accordionExample">
       <div class="card" style="border: 0!important;background-color: transparent!important;">
         <div class="card-header" id="headingOne" style="background-color: transparent!important;">
<!--              <h2 class="mb-0">-->
             <button class="btn btn-design" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" style="font-family: 'Poppins', sans-serif;letter-spacing: 1px;background-color: rgb(248,248,248)!important;border-color: transparent!important;color: tomato!important;text-align: left!important;padding-left: 0px!important;">
               <b>Trip Duration</b>
             </button>
<!--              </h2>-->
         </div>

         <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
           <div class="card-body" style="padding-top: 10px!important;padding-right: 0px!important;padding-left: 0px!important">
               <label class="contain"><span class="filter-font">Up To 3 Nights</span> 
               <input type="checkbox" class="common-selector duration" value="0,3">
               <span class="checkmark"></span>
             </label>

             <label class="contain"><span class="filter-font">4 - 6 Nights</span> 
               <input type="checkbox" class="common-selector duration" value="4,6">
               <span class="checkmark"></span>
             </label>

             <label class="contain"><span class="filter-font">7 - 10 Nights</span> 
               <input type="checkbox" class="common-selector duration" value="7,10">
               <span class="checkmark"></span>
             </label>

             <label class="contain"><span class="filter-font">11 - 15 Nights</span> 
               <input type="checkbox" class="common-selector duration" value="11,15">
               <span class="checkmark"></span>
             </label>
             
             <label class="contain"><span class="filter-font">Above 16 Nights</span> 
               <input type="checkbox" class="common-selector duration" value="16,365">
               <span class="checkmark"></span>
             </label>
             
           </div>
         </div>
       </div>
       <div class="card" style="border: 0!important;background-color: transparent!important;">
         <div class="card-header" id="headingOne" style="background-color: transparent!important;">
<!--              <h2 class="mb-0">-->
             <button class="btn btn-design" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo" style="font-family: 'Poppins', sans-serif;letter-spacing: 1px;background-color: rgb(248,248,248)!important;border-color: transparent!important;color: tomato!important;text-align: left!important;padding-left: 0px!important;">
               <b>Budget</b>
             </button>
<!--              </h2>-->
         </div>

         <div id="collapseTwo" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
           <div class="card-body" style="padding-top: 10px!important;padding-right: 0px!important;padding-left: 0px!important">
             <label class="contain"><span class="filter-font">Less Than 10,000</span> 
               <input type="checkbox" class="common-selector price" value="0,10000">
               <span class="checkmark"></span>
             </label>

             <label class="contain"><span class="filter-font">10,000 - 20,000</span> 
               <input type="checkbox" class="common-selector price" value="10000,20000">
               <span class="checkmark"></span>
             </label>

             <label class="contain"><span class="filter-font">20,000 - 40,000</span> 
               <input type="checkbox" class="common-selector price" value="20000,40000">
               <span class="checkmark"></span>
             </label>

             <label class="contain"><span class="filter-font">40,000 - 60,000</span> 
               <input type="checkbox" class="common-selector price" value="40000,60000">
               <span class="checkmark"></span>
             </label>
             
             <label class="contain"><span class="filter-font">60,000 - 80,000</span> 
               <input type="checkbox" class="common-selector price" value="60000,80000">
               <span class="checkmark"></span>
             </label>
             
             <label class="contain"><span class="filter-font">Above 80,000</span> 
               <input type="checkbox" class="common-selector price" value="80000,10000000">
               <span class="checkmark"></span>
             </label>
           </div>
         </div>
       </div>
       <div class="card" style="border: 0!important;background-color: transparent!important;">
         <div class="card-header" id="headingOne" style="background-color: transparent!important;">
<!--              <h2 class="mb-0">-->
             <button class="btn btn-design" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" style="font-family: 'Poppins', sans-serif;letter-spacing: 2px;background-color: rgb(248,248,248)!important;border-color: transparent!important;color: tomato!important;text-align: left!important;padding-left: 0px!important;">
               <b>Themes</b>
             </button>
<!--              </h2>-->
         </div>

         <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
           <div class="card-body" style="padding-top: 10px!important;padding-right: 0px!important;padding-left: 0px!important">
            
            {% for theme in themes %}
             <label class="contain"><span class="filter-font">{{ theme.theme_name }}</span> 
               <input type="checkbox" class="common-selector theme" value="{{ theme.pk }}">
               <span class="checkmark"></span>
             </label>
            {% endfor %}
             
           </div>
         </div>
       </div>
       
<!--          Trip Advisor -->
    
     <div class="trip_advisor">
      <div class="card" style="border: 0!important;background-color: transparent!important;">
         <div class="card-header" id="headingOne" style="background-color: transparent!important;">
<!--              <h2 class="mb-0">-->
             <button class="btn btn-design" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" style="font-family: 'Poppins', sans-serif;letter-spacing: 2px;background-color: rgb(248,248,248)!important;border-color: transparent!important;color: tomato!important;text-align: left!important;padding-left: 0px!important;transform: translate(-3%)">
               <b>Star Rating</b>
             </button>
<!--              </h2>-->
         </div>

         <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
           <div class="card-body" style="padding-top: 10px!important;padding-right: 0px!important;padding-left: 0px!important">
               
               <label class="contain"><span class="filter-font"><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i> 5 Star</span> 
               <input type="checkbox" class="common-selector rating" value="5">
               <span class="checkmark"></span>
             </label>
              
              <label class="contain"><span class="filter-font"><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i> 4 Star</span> 
               <input type="checkbox" class="common-selector rating" value="4">
               <span class="checkmark"></span>
             </label>
              
              <label class="contain"><span class="filter-font"><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i> 3 Star</span> 
               <input type="checkbox" class="common-selector rating" value="3">
               <span class="checkmark"></span>
             </label>
              
              <label class="contain"><span class="filter-font"><i class="fas fa-star fa-xs" style="color: goldenrod;"></i><i class="fas fa-star fa-xs" style="color: goldenrod;"></i> 2 Star</span> 
               <input type="checkbox" class="common-selector rating" value="2">
               <span class="checkmark"></span>
             </label>
               
           </div>
         </div>
       </div>
       </div>
     </div>
     
<!----------------Card------------->
   
     <div class="card mb-3 col-sm-9 fetch-data" >
       {% include 'cities/package_filter.html' %}  
     </div>
     <input type="hidden" id="city_id" value="{{city.city_id}}">
    </div>
 </div>
{% endblock bodycontent %}


{% block scriptcontent %} 
    <script src="{% static 'cities/js/read.js' %}"></script>
    <script src="{% static 'cities/js/5more.js' %}"></script>
    <script src="{% static 'cities/js/filter.js' %}"></script>

    <script>
        $(document).ready(function(){
            //filter_data();
            function filter_data(){
    
            var city_id = $("#city_id").val();
            var rating = get_filter('rating');
            var theme = get_filter('theme');
            var price = get_filter('price');
            var duration = get_filter('duration');
            $.post({
                url:"{% url 'cities-city_packages_filter' %}",
                data:{'city_id':city_id, 'rating':rating, 'price':price,
                    'duration':duration, 'theme':theme,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'},
                success:function(data){
                $('.fetch-data').html(data);
                }
            });
            }
    
            function get_filter(class_name){
            var filter = [];
            $('.' + class_name + ':checked').each(function(){
                filter.push($(this).val());
            });
            return filter;
            }
    
            $('.common-selector').click(function(){
            filter_data();
            });
    
        });
    </script>
{% endblock %}